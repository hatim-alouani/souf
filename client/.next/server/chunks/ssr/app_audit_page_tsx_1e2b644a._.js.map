{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/hatim_alouani/AI-AUDIT/App/client/app/audit/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\nexport default function AuditPage() {\n  const router = useRouter();\n\n  useEffect(() => {\n    async function initAudit() {\n      try {\n        // 1ï¸âƒ£ Try to restore previous audit progress\n        const user = JSON.parse(localStorage.getItem('user') || '{}');\n        if (user?.user_id) {\n          const res = await fetch(`/api/audit/resume?user_id=${user.user_id}`);\n          const data = await res.json();\n\n          if (data.ok && data.session_id && data.steps?.length > 0) {\n            console.log('ðŸ§  Resuming audit for user', user.user_id);\n            localStorage.setItem(\n              'audit_session',\n              JSON.stringify({\n                session_id: data.session_id,\n                state: data.state,\n                steps: data.steps,\n              })\n            );\n          } else {\n            console.log('ðŸ†• No existing audit session, starting fresh.');\n            localStorage.removeItem('audit_session');\n          }\n        }\n      } catch (err) {\n        console.warn('âš ï¸ Resume check failed:', err);\n      }\n\n      // 2ï¸âƒ£ Load Unith assets (once)\n      if (document.getElementById('unith-bundle')) return;\n\n      const script = document.createElement('script');\n      script.id = 'unith-bundle';\n      script.defer = true;\n      script.src = 'https://embedded.unith.ai/dist/bundle.js';\n      document.body.appendChild(script);\n\n      const msSpeech = document.createElement('script');\n      msSpeech.src = 'https://embedded.unith.ai/microsoft-speech-recognition.js';\n      document.body.appendChild(msSpeech);\n\n      const css = document.createElement('link');\n      css.rel = 'stylesheet';\n      css.href = 'https://embedded.unith.ai/dist/bundle.css';\n      document.head.appendChild(css);\n\n      const fonts = document.createElement('link');\n      fonts.rel = 'stylesheet';\n      fonts.href = 'https://gpt-head-assets.unith.ai/fonts/stylesheet.css';\n      fonts.media = 'print';\n      fonts.onload = function () {\n        (this as HTMLLinkElement).media = 'all';\n      };\n      document.head.appendChild(fonts);\n    }\n\n    initAudit();\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('audit_session');\n    router.push('/');\n  };\n\n  const handleLogoClick = () => {\n    handleLogout();\n  };\n\n  return (\n    <main\n      className=\"flex flex-col w-screen h-screen overflow-hidden\"\n      style={{ backgroundColor: '#fff' }}\n    >\n      {/* Top Navigation Bar */}\n     <nav className=\"w-full h-16 bg-white/90 backdrop-blur border-b border-gray-200 shadow-sm flex items-center justify-between px-6 z-50\">\n      {/* Left: Logo */}\n      <div\n        className=\"flex items-center gap-2 cursor-pointer\"\n        onClick={handleLogoClick}\n      >\n        <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg\">\n          A\n        </div>\n        <h1 className=\"text-lg font-semibold tracking-tight text-gray-800\">\n          A2X CORP\n        </h1>\n      </div>\n\n      {/* Right: Buttons */}\n      <div className=\"flex items-center gap-3\">\n        <a\n          href=\"/profile\"\n          className=\"text-gray-700 hover:text-blue-600 transition-all font-medium\"\n        >\n          Profile\n        </a>\n\n        <a\n          href=\"/audit\"\n          className=\"text-gray-700 hover:text-blue-600 transition-all font-medium\"\n        >\n          Refresh\n        </a>\n      </div>\n    </nav>\n\n\n      {/* Unith Avatar */}\n     <iframe\n      src=\"https://chat.unith.ai/a2xcorp/ai-audit-19713?api_key=c0fcea77824e4bd38007224654e847d4\"\n      width=\"100%\"        // adjust as needed\n      height=\"600px\"       // adjust as needed\n      allow=\"microphone\"\n      style={{ border: 'none' }}\n    ></iframe>\n\n\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,IAAI;gBACF,6CAA6C;gBAC7C,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,WAAW;gBACxD,IAAI,MAAM,SAAS;oBACjB,MAAM,MAAM,MAAM,MAAM,CAAC,0BAA0B,EAAE,KAAK,OAAO,EAAE;oBACnE,MAAM,OAAO,MAAM,IAAI,IAAI;oBAE3B,IAAI,KAAK,EAAE,IAAI,KAAK,UAAU,IAAI,KAAK,KAAK,EAAE,SAAS,GAAG;wBACxD,QAAQ,GAAG,CAAC,8BAA8B,KAAK,OAAO;wBACtD,aAAa,OAAO,CAClB,iBACA,KAAK,SAAS,CAAC;4BACb,YAAY,KAAK,UAAU;4BAC3B,OAAO,KAAK,KAAK;4BACjB,OAAO,KAAK,KAAK;wBACnB;oBAEJ,OAAO;wBACL,QAAQ,GAAG,CAAC;wBACZ,aAAa,UAAU,CAAC;oBAC1B;gBACF;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,IAAI,CAAC,2BAA2B;YAC1C;YAEA,+BAA+B;YAC/B,IAAI,SAAS,cAAc,CAAC,iBAAiB;YAE7C,MAAM,SAAS,SAAS,aAAa,CAAC;YACtC,OAAO,EAAE,GAAG;YACZ,OAAO,KAAK,GAAG;YACf,OAAO,GAAG,GAAG;YACb,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,MAAM,WAAW,SAAS,aAAa,CAAC;YACxC,SAAS,GAAG,GAAG;YACf,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,MAAM,MAAM,SAAS,aAAa,CAAC;YACnC,IAAI,GAAG,GAAG;YACV,IAAI,IAAI,GAAG;YACX,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,MAAM,QAAQ,SAAS,aAAa,CAAC;YACrC,MAAM,GAAG,GAAG;YACZ,MAAM,IAAI,GAAG;YACb,MAAM,KAAK,GAAG;YACd,MAAM,MAAM,GAAG;gBACb,AAAC,IAAI,CAAqB,KAAK,GAAG;YACpC;YACA,SAAS,IAAI,CAAC,WAAW,CAAC;QAC5B;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,kBAAkB;QACtB;IACF;IAEA,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YAAE,iBAAiB;QAAO;;0BAGlC,8OAAC;gBAAI,WAAU;;kCAEd,8OAAC;wBACC,WAAU;wBACV,SAAS;;0CAET,8OAAC;gCAAI,WAAU;0CAAiG;;;;;;0CAGhH,8OAAC;gCAAG,WAAU;0CAAqD;;;;;;;;;;;;kCAMrE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;0CAID,8OAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;0BAQJ,8OAAC;gBACA,KAAI;gBACJ,OAAM;gBACN,QAAO;gBACP,OAAM;gBACN,OAAO;oBAAE,QAAQ;gBAAO;;;;;;;;;;;;AAM9B","debugId":null}}]
}