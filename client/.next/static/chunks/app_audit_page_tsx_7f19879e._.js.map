{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/hatim_alouani/AI-AUDIT/App/client/app/audit/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\nexport default function AuditPage() {\n  const router = useRouter();\n\n  useEffect(() => {\n    async function initAudit() {\n      try {\n        // 1ï¸âƒ£ Try to restore previous audit progress\n        const user = JSON.parse(localStorage.getItem('user') || '{}');\n        if (user?.user_id) {\n          const res = await fetch(`/api/audit/resume?user_id=${user.user_id}`);\n          const data = await res.json();\n\n          if (data.ok && data.session_id && data.steps?.length > 0) {\n            console.log('ðŸ§  Resuming audit for user', user.user_id);\n            localStorage.setItem(\n              'audit_session',\n              JSON.stringify({\n                session_id: data.session_id,\n                state: data.state,\n                steps: data.steps,\n              })\n            );\n          } else {\n            console.log('ðŸ†• No existing audit session, starting fresh.');\n            localStorage.removeItem('audit_session');\n          }\n        }\n      } catch (err) {\n        console.warn('âš ï¸ Resume check failed:', err);\n      }\n\n      // 2ï¸âƒ£ Load Unith assets (once)\n      if (document.getElementById('unith-bundle')) return;\n\n      const script = document.createElement('script');\n      script.id = 'unith-bundle';\n      script.defer = true;\n      script.src = 'https://embedded.unith.ai/dist/bundle.js';\n      document.body.appendChild(script);\n\n      const msSpeech = document.createElement('script');\n      msSpeech.src = 'https://embedded.unith.ai/microsoft-speech-recognition.js';\n      document.body.appendChild(msSpeech);\n\n      const css = document.createElement('link');\n      css.rel = 'stylesheet';\n      css.href = 'https://embedded.unith.ai/dist/bundle.css';\n      document.head.appendChild(css);\n\n      const fonts = document.createElement('link');\n      fonts.rel = 'stylesheet';\n      fonts.href = 'https://gpt-head-assets.unith.ai/fonts/stylesheet.css';\n      fonts.media = 'print';\n      fonts.onload = function () {\n        (this as HTMLLinkElement).media = 'all';\n      };\n      document.head.appendChild(fonts);\n    }\n\n    initAudit();\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('audit_session');\n    router.push('/');\n  };\n\n  const handleLogoClick = () => {\n    handleLogout();\n  };\n\n  return (\n    <main\n      className=\"flex flex-col w-screen h-screen overflow-hidden\"\n      style={{ backgroundColor: '#fff' }}\n    >\n      {/* Top Navigation Bar */}\n     <nav className=\"w-full h-16 bg-white/90 backdrop-blur border-b border-gray-200 shadow-sm flex items-center justify-between px-6 z-50\">\n      {/* Left: Logo */}\n      <div\n        className=\"flex items-center gap-2 cursor-pointer\"\n        onClick={handleLogoClick}\n      >\n        <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg\">\n          A\n        </div>\n        <h1 className=\"text-lg font-semibold tracking-tight text-gray-800\">\n          A2X CORP\n        </h1>\n      </div>\n\n      {/* Right: Buttons */}\n      <div className=\"flex items-center gap-3\">\n        <a\n          href=\"/profile\"\n          className=\"text-gray-700 hover:text-blue-600 transition-all font-medium\"\n        >\n          Profile\n        </a>\n\n        <a\n          href=\"/audit\"\n          className=\"text-gray-700 hover:text-blue-600 transition-all font-medium\"\n        >\n          Refresh\n        </a>\n      </div>\n    </nav>\n\n\n      {/* Unith Avatar */}\n     <iframe\n      src=\"https://chat.unith.ai/a2xcorp/ai-audit-19713?api_key=c0fcea77824e4bd38007224654e847d4\"\n      width=\"100%\"        // adjust as needed\n      height=\"600px\"       // adjust as needed\n      allow=\"microphone\"\n      style={{ border: 'none' }}\n    ></iframe>\n\n\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;+BAAC;YACR,eAAe;gBACb,IAAI;oBACF,6CAA6C;oBAC7C,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,WAAW;oBACxD,IAAI,iBAAA,2BAAA,KAAM,OAAO,EAAE;4BAIiB;wBAHlC,MAAM,MAAM,MAAM,MAAM,AAAC,6BAAyC,OAAb,KAAK,OAAO;wBACjE,MAAM,OAAO,MAAM,IAAI,IAAI;wBAE3B,IAAI,KAAK,EAAE,IAAI,KAAK,UAAU,IAAI,EAAA,cAAA,KAAK,KAAK,cAAV,kCAAA,YAAY,MAAM,IAAG,GAAG;4BACxD,QAAQ,GAAG,CAAC,8BAA8B,KAAK,OAAO;4BACtD,aAAa,OAAO,CAClB,iBACA,KAAK,SAAS,CAAC;gCACb,YAAY,KAAK,UAAU;gCAC3B,OAAO,KAAK,KAAK;gCACjB,OAAO,KAAK,KAAK;4BACnB;wBAEJ,OAAO;4BACL,QAAQ,GAAG,CAAC;4BACZ,aAAa,UAAU,CAAC;wBAC1B;oBACF;gBACF,EAAE,OAAO,KAAK;oBACZ,QAAQ,IAAI,CAAC,2BAA2B;gBAC1C;gBAEA,+BAA+B;gBAC/B,IAAI,SAAS,cAAc,CAAC,iBAAiB;gBAE7C,MAAM,SAAS,SAAS,aAAa,CAAC;gBACtC,OAAO,EAAE,GAAG;gBACZ,OAAO,KAAK,GAAG;gBACf,OAAO,GAAG,GAAG;gBACb,SAAS,IAAI,CAAC,WAAW,CAAC;gBAE1B,MAAM,WAAW,SAAS,aAAa,CAAC;gBACxC,SAAS,GAAG,GAAG;gBACf,SAAS,IAAI,CAAC,WAAW,CAAC;gBAE1B,MAAM,MAAM,SAAS,aAAa,CAAC;gBACnC,IAAI,GAAG,GAAG;gBACV,IAAI,IAAI,GAAG;gBACX,SAAS,IAAI,CAAC,WAAW,CAAC;gBAE1B,MAAM,QAAQ,SAAS,aAAa,CAAC;gBACrC,MAAM,GAAG,GAAG;gBACZ,MAAM,IAAI,GAAG;gBACb,MAAM,KAAK,GAAG;gBACd,MAAM,MAAM;qDAAG;wBACb,AAAC,IAAI,CAAqB,KAAK,GAAG;oBACpC;;gBACA,SAAS,IAAI,CAAC,WAAW,CAAC;YAC5B;YAEA;QACF;8BAAG,EAAE;IAEL,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,kBAAkB;QACtB;IACF;IAEA,qBACE,6LAAC;QACC,WAAU;QACV,OAAO;YAAE,iBAAiB;QAAO;;0BAGlC,6LAAC;gBAAI,WAAU;;kCAEd,6LAAC;wBACC,WAAU;wBACV,SAAS;;0CAET,6LAAC;gCAAI,WAAU;0CAAiG;;;;;;0CAGhH,6LAAC;gCAAG,WAAU;0CAAqD;;;;;;;;;;;;kCAMrE,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;0CAID,6LAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;0BAQJ,6LAAC;gBACA,KAAI;gBACJ,OAAM;gBACN,QAAO;gBACP,OAAM;gBACN,OAAO;oBAAE,QAAQ;gBAAO;;;;;;;;;;;;AAM9B;GA5HwB;;QACP,kJAAS;;;KADF","debugId":null}}]
}